---
import { createFontCSS, createBaseCSS } from "./utils";

export interface Props {
  config: {
    name: string;
    display: string;
    preload: boolean;
    selector: string;
    basePath: string;
    fallback: 'sans' | 'sans-serif';
    src: {
      path: string;
      style: string;
      weight: string | number;
    }[]
  }[];
}

const { config } = Astro.props as Props;

const baseCSS = await Promise.all(config.map((entry) => createBaseCSS(entry)));
const fallbackCSS = await Promise.all(config.map((entry) => createFontCSS(entry)));
---

{baseCSS.map((content) => <style set:html={content} is:inline />)}
{fallbackCSS.map((content) => <style set:html={content} is:inline />)}
